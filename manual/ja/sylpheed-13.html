<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Sylpheed User's Manual: メッセージの振り分け</TITLE>
 <LINK HREF="sylpheed-14.html" REL=next>
 <LINK HREF="sylpheed-12.html" REL=previous>
 <LINK HREF="sylpheed.html#toc13" REL=contents>
</HEAD>
<BODY>
<A HREF="sylpheed-14.html">次のページ</A>
<A HREF="sylpheed-12.html">前のページ</A>
<A HREF="sylpheed.html#toc13">目次へ</A>
<HR>
<H2><A NAME="s13">13.</A> <A HREF="sylpheed.html#toc13">メッセージの振り分け</A></H2>

<P>Sylpheedには強力なフィルタリング機能が搭載されており、受信したメッセージに対して自動的に振り分けをはじめとするさまざまな処理を行うことができます。</P>
<H2><A NAME="filtering-config"></A> <A NAME="ss13.1">13.1</A> <A HREF="sylpheed.html#toc13.1">振り分けの設定</A>
</H2>

<P>メニューより、「設定＞振り分けの設定...」を選択します。</P>

<H3>フィルタルールの登録</H3>

<P>「追加」ボタンを押すとフィルタルール設定ダイアログが開きます。</P>
<P>「名前:」欄にルールに対する分かりやすい名前を入力します。</P>
<P>その下にあるドロップダウンメニューで、複数の条件がある場合にどのようにマッチさせるかを選択します。</P>

<H3>条件の設定</H3>

<P>上部枠内の「From」と表示されているドロップダウンメニューで、振り分けの対象にしたいヘッダやその他の条件を選択します。選択肢にないヘッダは「ヘッダを編集...」で追加することができます。</P>

<P>
<DL>
<DT><B>ヘッダ項目(From, To等):</B><DD>
<P>対象となるヘッダを指定します。</P>
<DT><B>To または Cc:</B><DD>
<P>To または Cc の両方を同時に指定します。</P>
<DT><B>いずれかのヘッダ:</B><DD>
<P>すべてのヘッダが対象になります。</P>
<DT><B>ヘッダを編集...:</B><DD>
<P>ドロップダウンメニューに表示されるヘッダの追加または削除を行います。</P>
<DT><B>メッセージ本文:</B><DD>
<P>メッセージの本文を対象とします。</P>
<DT><B>コマンドの実行結果:</B><DD>
<P>外部コマンドを実行し、その戻り値によって振り分けを行います。戻り値が0であればマッチし、0以外であればマッチしません。コマンドラインの末尾にメッセージのファイル名が付加されます。リダイレクトなどのシェル機能は使用できないので、その場合はラッパースクリプトを作成する必要があります。</P>
<DT><B>サイズ:</B><DD>
<P>メッセージファイルのサイズを指定した値と比較します。</P>
<DT><B>経過日数:</B><DD>
<P>メッセージの送信日時から受信した日時までの経過日数を指定した値と比較します。</P>
<DT><B>未読:</B><DD>
<P>未読フラグが立っているかどうかを判定します。</P>
<DT><B>マーク付き:</B><DD>
<P>マークが付けられているかどうかを判定します。</P>
<DT><B>カラーラベル付き:</B><DD>
<P>カラーラベルが付けられているかどうかを判定します。</P>
<DT><B>添付ファイル付き:</B><DD>
<P>添付ファイルが付けられているかどうかを判定します。</P>
</DL>
</P>
<P>次に、右のドロップダウンメニューで条件をキーワードにマッチさせる方法を選択します。アルファベットの大小文字は区別しません。正規表現には拡張正規表現が使用できます。</P>
<P>
<UL>
<LI>ヘッダ・本文
<P>
<DL>
<DT><B>〜が次を含む:</B><DD>
<P>ヘッダや本文の内容がキーワードを含む場合マッチします。</P>
<DT><B>〜が次を含まない:</B><DD>
<P>ヘッダや本文の内容がキーワードを含まない場合マッチします。</P>
<DT><B>〜が次に一致:</B><DD>
<P>ヘッダや本文中の1行がキーワードに一致する場合マッチします。</P>
<DT><B>〜が次に一致しない:</B><DD>
<P>ヘッダや本文中の1行がキーワードに一致しない場合マッチします。</P>
<DT><B>〜が次の正規表現にマッチ:</B><DD>
<P>ヘッダや本文の内容が正規表現にマッチする場合、マッチします。</P>
<DT><B>〜が次の正規表現にマッチしない:</B><DD>
<P>ヘッダや本文の内容が正規表現にマッチしない場合、マッチします。</P>
<DT><B>〜がアドレス帳にある:</B><DD>
<P>ヘッダに含まれるアドレスがアドレス帳に登録されている場合、マッチします。複数のアドレスの場合、それらのすべてが登録されている場合にマッチします。</P>
<DT><B>〜がアドレス帳にない:</B><DD>
<P>ヘッダに含まれるアドレスがアドレス帳に登録されていない場合、マッチします。複数のアドレスの場合、それらのいずれかが登録されていない場合にマッチします。</P>
</DL>
</P>
</LI>
<LI>サイズ
<P>
<DL>
<DT><B>(サイズ)が次より大きい:</B><DD>
<P>サイズが指定した値より大きい場合マッチします。</P>
<DT><B>(サイズ)が次より小さい:</B><DD>
<P>サイズが指定した値より小さい場合マッチします。</P>
</DL>
</P>
</LI>
<LI>経過日数
<P>
<DL>
<DT><B>(経過日数)が次より長い:</B><DD>
<P>送信日時からの経過日数が指定した値より長い場合マッチします。</P>
<DT><B>(経過日数)が次より短い:</B><DD>
<P>送信日時からの経過日数が指定した値より短い場合マッチします。</P>
</DL>
</P>
</LI>
<LI>状態(未読、マーク、カラーラベル、添付)
<P>
<DL>
<DT><B>〜が状態に一致:</B><DD>
<P>未読やラベル、添付ファイルなどの状態フラグが立っている場合マッチします。</P>
<DT><B>〜が状態に一致しない:</B><DD>
<P>未読やラベル、添付ファイルなどの状態フラグが立っていない場合マッチします。</P>
</DL>
</P>
</LI>
</UL>
</P>
<P>振り分けの対象にヘッダや本文を選択した場合は、キーワードを入力します。キーワードを空にした場合は、ヘッダが存在すれば常にマッチするようになります。
サイズや経過日数を選択した場合は、数値を入力します。</P>
<P>条件を追加したい場合は、"+"ボタンを選択すると新しい行が追加されるので、同様に上記の作業を繰り返します。また、"-"ボタンを選択するとその条件を削除することができます。</P>
<H3>アクションの設定</H3>

<P>次に、アクションを選択します。条件と同様に任意に追加できますが、「移動」、「受信しない」、「サーバから削除」は一度しか実行できず、同時に選択することはできません。移動先やコピー先を指定する場合はフォルダアイコンのボタンで選択できます。</P>

<P>
<DL>
<DT><B>移動:</B><DD>
<P>指定したフォルダにメッセージを移動します(以降のルールは評価されません)。</P>
<DT><B>コピー:</B><DD>
<P>指定したフォルダにメッセージをコピーします。何度でも実行可能です。</P>
<DT><B>受信しない:</B><DD>
<P>メッセージをサーバに残します(以降のルールは評価されません)。</P>
<DT><B>サーバから削除:</B><DD>
<P>受信時にサーバにメッセージを残す設定にしていた場合でも、強制的にサーバから削除します(以降のルールは評価されません)。</P>
<DT><B>マーク:</B><DD>
<P>マークを付けます。</P>
<DT><B>カラーラベルを指定:</B><DD>
<P>カラーラベルを付けます。</P>
<DT><B>読んだことにする:</B><DD>
<P>未読マークを外します。</P>
<DT><B>コマンドを実行:</B><DD>
<P>任意のコマンドを実行します。コマンドラインの末尾にメッセージのファイル名が自動的に付加されます。</P>
<DT><B>ルールの評価を停止:</B><DD>
<P>当該ルール以降のルールを評価しないようにします。</P>
</DL>
</P>
<P>設定が完了したら、「OK」ボタン押すと登録が完了します。「キャンセル」を押すと設定は破棄されます。</P>
<H3>振り分けルールの例</H3>

<P>Subjectに「未承諾広告」または「未承認広告」が含まれる場合にごみ箱(trash)に振り分けしたい場合を例にします。</P>
<P>まず、「次の条件のいずれかが該当する場合」を選択します。</P>
<P>そして、1つめの条件で「Subject」を選択し、マッチ方法として「が次を含む」を選択し、キーワードに「未承諾広告」を入力します。</P>
<P>"+"ボタンを押し、2つめの条件を追加します。</P>
<P>同じく「Subject」を選び、「が次を含む」を選択し、キーワードに「未承認広告」を入力します。</P>
<P>そして、アクションで「移動」を選択し、フォルダの選択ボタンを押してごみ箱(trash)を選択します。</P>
<P>その後、「OK」ボタンを押すとルールの追加は完了です。</P>
<H3>振り分けルールの編集</H3>

<P>登録済みルールのリストから編集したいルールを選択して、「編集」ボタンを押します。</P>
<H3>振り分けルールのコピー</H3>

<P>登録済みルールのリストからコピーしたいルールを選択して、「コピー」ボタンを押します。</P>
<H3>振り分けルールの削除</H3>

<P>登録済みルールのリストから削除したいルールを選択して、「削除」ボタンを押します。</P>
<H3>振り分けルールの自動生成</H3>

<P>
<A HREF="sylpheed-6.html#summaryview">サマリビュー</A>でメッセージを
<A HREF="sylpheed-7.html#select-operation">選択</A>してから、
メニューの「ツール＞振り分けルールを作成」、または
<A HREF="sylpheed-6.html#context-menu">コンテキストメニュー</A>の「振り分けルールを作成」を実行することで、ルールのひな型を自動的に作成します。その後の設定方法は上記と同様です。</P>
<P>ドロップダウンメニューにはメッセージに含まれるヘッダが追加され、メニューを選択するとキーワードも自動的に入力されます。</P>
<H2><A NAME="ss13.2">13.2</A> <A HREF="sylpheed.html#toc13.2">振り分けを実行するには</A>
</H2>


<H3>受信時に自動的に振り分けを実行するには</H3>

<P>受信時に自動的に振り分けを実行したいアカウントの
<A HREF="sylpheed-8.html#Account-Config">アカウントの設定</A>で、
受信タブの中にある「受信時にメッセージを振り分ける」にチェックを入れます。</P>
<H3>受信済みのメッセージにフィルタルールを適用するには</H3>

<P>メニューの「ツール＞フォルダ中のすべてのメッセージを振り分け」または「ツール＞選択中のメッセージを振り分け」を選択することで、設定されたルールを元に振り分けが実行されます。</P>
<HR>
<A HREF="sylpheed-14.html">次のページ</A>
<A HREF="sylpheed-12.html">前のページ</A>
<A HREF="sylpheed.html#toc13">目次へ</A>
</BODY>
</HTML>
